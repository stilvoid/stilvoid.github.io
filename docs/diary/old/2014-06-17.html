<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="Stylesheet" type="text/css" href="../../style.css" />
        <title>2014-06-17</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>
    <body>
        <header>
            <nav>
                <p>
                    <a href="../../index.html">Home</a>
                    <a href="../../projects.html">Projects</a>
                    <a href="../../diary/index.html">Blog</a>
                </p>
            </nav>
        </header>

        <main>
            
<p>
---
tags: linux
title: tmux
---
</p>

<p>
[tmux](<a href="http://tmux.sourceforge.net/)">http://tmux.sourceforge.net/)</a> is the best thing ever. That is all.
</p>

<p>
No, that is not all. Here is how I make use of tmux to make my life measurably more awesome:
</p>

<p>
First, my <code>.tmux.conf</code>. This changes tmux's <code>ctrl-b</code> magic key binding to <code>ctrl-a</code> as I've grown far too used to hitting that from when I used [screen](<a href="https://www.gnu.org/software/screen/).">https://www.gnu.org/software/screen/).</a> I set up a few other screen-like bindings too. Finally, I set a few options that make tmux work better with urxvt.
</p>

<p>
```config 
</p>
<ul>
<li>
Set the prefix to ^A.

</ul>
<p>
unbind C-b
set -g prefix ^A
bind a send-prefix
</p>

<ul>
<li>
Bind c to new-window

</ul>
<p>
unbind c
bind c new-window -c $PWD
</p>

<ul>
<li>
Bind space, n to next-window

</ul>
<p>
unbind " "
bind " " next-window
unbind n
bind n next-window
</p>

<ul>
<li>
Bind p to previous-window

</ul>
<p>
unbind p
bind p previous-window
</p>

<ul>
<li>
A few other settings to make things funky

</ul>
<p>
set -g status off
set -g aggressive-resize on
set -g mode-keys vi
set -g default-terminal screen-256color
set -g terminal-overrides 'rxvt-unicode*:sitm@'
```
</p>

<p>
And then here's what I have near the top of my <code>.bashrc</code>:
</p>

<p>
```bash 
</p>
<ul>
<li>
If tmux isn't already running, run it

</ul>
<p>
[ -z "$TMUX" ] &amp;&amp; exec ~/bin/tmux
```
</p>

<p>
...which goes with this, the contents of <code>~/bin/tmux</code>:
</p>

<p>
```bash 
#!/bin/bash
</p>

<ul>
<li>
If there are any sessions that aren't attached, attach to the first one

<li>
Otherwise, start a new session

</ul>
<p>
for line in $(tmux ls -F "#{session_name},#{session_attached}"); do
</p>
<pre><code>name=\((echo \)line | cut -d ',' -f 1)
attached=\((echo \)line | cut -d ',' -f 2)
</code></pre>
<pre><code>if [ $attached -eq 0 ]; then
tmux attach -t $name
exit
fi
</code></pre>
<p>
done
</p>

<p>
tmux -u
```
</p>

<p>
Basically, what happens is that whenever I start a terminal session, if I'm not already attached to a tmux session, I find a session that's not already attached to and attach to it. If there aren't any, I create a new one.
</p>

<p>
This really tidies up my workflow and means that I never forget about any old sessions I'd detached.
</p>

<p>
Oh and one last thing, <code>ctrl-a s</code> is the best thing in tmux ever. It shows a list of tmux sessions which can be expanded to show what's running in them and you can then interactively re-attach your terminal to one of them. In short, I can start a terminal from any desktop or vt and quickly attach to something that's happening on any other. I use this feature *<span id="-a lot"></span><strong id="a lot">a lot</strong>*.
</p>

        </main>

        <footer>
            <p>
            All content Â© 2011-2024 Steve Engledow.
            <br />
            All views expressed here are mine and don't reflect those of Amazon.
            <br />
            The <a href="https://github.com/stilvoid/stilvoid.github.io">contents of this web site</a> are available under the terms of the <a href="https://github.com/stilvoid/stilvoid.github.io/blob/master/LICENSE">MIT licence</a>.
            </p>
        </footer>
    </body>
</html>
