<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>engledow.me: xmodmap Hints and Tips</title>
        <link rel="stylesheet" href="/style.css">
        <link rel="me" href="https://retro.pizza/@stilvoid">
        <meta name="fediverse:creator" content="@stilvoid@retro.pizza">
    </head>

    <body>
        <nav>
            <ul>
                <li><a href="/">About</a></li>
                <li><a href="/blog/" class="selected">Blog</a></li>
                <li><a href="/bookmarks/">Bookmarks</a></li>
                <li><a href="/tools/">Command-line tools</a></li>
                <li><a href="/games/">Games</a></li>
                <li><a href="/music/">Music</a></li>
            </ul>
            <ul>
                <li><a href="/blog/2024-08-28/">TBC</a><br><span class="date">(2024-08-28)</span></li>
                <li><a href="/blog/2024-07-23/">Back to the Primitive</a><br><span class="date">(2024-07-23)</span></li>
                <li><a href="/blog/2019-11-13/">Maur - A minimal AUR helper</a><br><span class="date">(2019-11-13)</span></li>
                <li><a href="/blog/2019-02-12/">Using Git with AWS CodeCommit Across Multiple AWS Accounts</a><br><span class="date">(2019-02-12)</span></li>
                <li><a href="/blog/2018-11-08/">git-get</a><br><span class="date">(2018-11-08)</span></li>
                <li><a href="/blog/2018-08-14/">Heroes: Building some old code</a><br><span class="date">(2018-08-14)</span></li>
                <li><a href="/blog/2018-06-03/">Shue</a><br><span class="date">(2018-06-03)</span></li>
                <li><a href="/blog/2017-07-10/">An evening of linux on the desktop</a><br><span class="date">(2017-07-10)</span></li>
                <li><a href="/blog/2017-06-15/">The day of linux on the desktop</a><br><span class="date">(2017-06-15)</span></li>
                <li><a href="/blog/2016-02-25/">Digital Subscriber</a><br><span class="date">(2016-02-25)</span></li>
                <li><a href="/blog/2015-12-14/">Ford</a><br><span class="date">(2015-12-14)</span></li>
                <li><a href="/blog/2015-11-30/">Sorted</a><br><span class="date">(2015-11-30)</span></li>
                <li><a href="/blog/2015-09-17/">Twofer</a><br><span class="date">(2015-09-17)</span></li>
                <li><a href="/blog/2015-06-22/">Pretty please</a><br><span class="date">(2015-06-22)</span></li>
                <li><a href="/blog/2015-05-15/">Andy and Teddy are waving goodbye</a><br><span class="date">(2015-05-15)</span></li>
                <li><a href="/blog/2015-05-14/">Building a componentised application</a><br><span class="date">(2015-05-14)</span></li>
                <li><a href="/blog/2015-04-29/">Why-fi?</a><br><span class="date">(2015-04-29)</span></li>
                <li><a href="/blog/2015-03-12/">Cleaning out my closet</a><br><span class="date">(2015-03-12)</span></li>
                <li><a href="/blog/2015-01-02/">Keychain and GnuPG >= 2.1</a><br><span class="date">(2015-01-02)</span></li>
                <li><a href="/blog/2014-12-09/">Testing a Django app with Docker</a><br><span class="date">(2014-12-09)</span></li>
                <li><a href="/blog/2014-12-01/">Just call me Anneka</a><br><span class="date">(2014-12-01)</span></li>
                <li><a href="/blog/2014-06-17/">tmux</a><br><span class="date">(2014-06-17)</span></li>
                <li><a href="/blog/2014-04-15/">Netcat</a><br><span class="date">(2014-04-15)</span></li>
                <li><a href="/blog/2014-01-31/">btw</a><br><span class="date">(2014-01-31)</span></li>
                <li><a href="/blog/2013-05-10/">Things we learned at the LUG meet</a><br><span class="date">(2013-05-10)</span></li>
                <li><a href="/blog/2013-02-11/">Git aux</a><br><span class="date">(2013-02-11)</span></li>
                <li><a href="/blog/2012-08-30/">Lost at C</a><br><span class="date">(2012-08-30)</span></li>
                <li><a href="/blog/2012-07-07/">Ire</a><br><span class="date">(2012-07-07)</span></li>
                <li><a href="/blog/2011-10-27/">Break In!</a><br><span class="date">(2011-10-27)</span></li>
                <li><a href="/blog/2011-10-22/" class="selected">xmodmap Hints and Tips</a><br><span class="date">(2011-10-22)</span></li>
            </ul>
        </nav>

        <main>
            <h1 id="xmodmap-hints-and-tips">xmodmap Hints and Tips</h1>

<p>Originally posted on <a href="http://rollingrelease.com/system/2010/09/xmodmap-hints-and-tips">Rolling Release</a>.
I&#39;m reposting this here as I recently broke my finger and so made a few
changes to my xmodmap settings to accommodate the ensuing one-handed
typing. Once again, I had to <a href="http://ddg.gg/">search</a> for how to use
xmodmap and came upon my own post. I&#39;m keeping it here for easier
reference and in the hope the details will burn deeper into my mind. It
was written for a tutorial column so excuse the tone.</p>

<h2 id="about-xmodmap">About xmodmap</h2>

<p>Xmodmap is used to control the mappings between the keys you press on
the keyboard and the results you will experience on screen. Some common
usage examples of xmodmap are:</p>

<ul>
<li>Disabling and/or reallocating the caps-lock key</li>
<li>Mapping certain foreign or other special characters to keys on your
keyboard</li>
<li>Enabling &#34;media&#34; keys</li>
<li>Terminology</li>
</ul>

<p>To achieve things like the above, you&#39;ll be mapping KeyCodes to KeySyms
and KeySyms to Modifiers so it&#39;s obviously important to understand
exactly what xmodmap means by these terms (I certainly didn&#39;t when I
started out).</p>

<h2 id="keycode">KeyCode</h2>

<p>A KeyCode is a number generated by your keyboard when you press a
certain key. For example, the space bar usually produces the KeyCode
128.</p>

<h2 id="keysym">KeySym</h2>

<p>A KeySym is simply a word used to name a type of key. This concept is
very important because it means that applications don&#39;t need to
interpret the information output by your keyboard directly; they can
refer to keys by name.</p>

<p>As mentioned above, most keyboards produce the code 128 when you press
the spacebar but it would be possible to have a very non-standard
keyboard that outputs the KeyCode 64 when the spacebar is pressed. You&#39;d
certainly want to ensure that code 64 is interpreted as a spacebar press
without having to rewrite all the applications you use. To do this, we&#39;d
map the KeyCode 64 to the KeySym &#34;space&#34;.</p>

<h2 id="modifier">Modifier</h2>

<p>A Modifier is a special kind of key that can be held at the same time as
another key and modify its output. For example, when you press the A key
on your keyboard, you see the letter &#39;a&#39; appear on screen. If you hold
shift and press A, you&#39;ll see the letter &#39;A&#39; – shift is a Modifier.</p>

<p>Let&#39;s start with looking at modifiers to get the hang of Modifiers and
KeySyms...</p>

<h2 id="modifiers">Modifiers</h2>

<p>There are 8 modifiers:</p>

<ul>
<li>Shift</li>
<li>Lock</li>
<li>Control</li>
<li>Mod1</li>
<li>Mod2</li>
<li>Mod3</li>
<li>Mod4</li>
<li>Mod5</li>
</ul>

<p>Xmodmap provides three different operations for changing the way KeySyms
are mapped to Modifiers: clear, add, and remove.</p>

<p>My favourite example – turning off caps lock:</p>

<p><code>$ xmodmap -e &#34;clear Lock&#34;</code></p>

<p>This command clears the Lock modifier meaning that no keys now produce a
caps lock effect. Bliss!</p>

<p>To reassign the caps lock key to do something more useful:</p>

<p><code>$ xmodmap -e &#34;add Shift = Caps_Lock&#34;</code></p>

<p>This adds the KeySym &#34;Caps_Lock&#34; to the list of keys that produce the
Shift modifier. In other words, we&#39;ve turned caps lock into another
shift key.</p>

<p>If you change your mind and want to stop the caps lock key behaving as a
shift key:</p>

<p><code>$ xmodmap -e &#34;remove Shift = Caps_Lock&#34;</code></p>

<p>This is basically the opposite of the previous example.</p>

<h2 id="mapping-keycodes-to-keysyms">Mapping KeyCodes to KeySyms</h2>

<p>Now we&#39;ve got the hang of changing the Modifiers, we&#39;ll round off by
looking at mapping the physical keys on your keyboard to produce the
results you want.</p>

<p>First things first, you&#39;ll need to know the keycode of the key you want
to change. To do this, you can use xev.</p>

<p><code>$ xev</code></p>

<p>After running xev, press the key in question and you&#39;ll see some output
like this in your terminal:</p>

<pre><code>KeyPress event, serial 21, synthetic YES, window 0x800001,
root 0x40, subw 0x0, time 1539131, (69,8), root:(683,402),
state 0x0, keycode 63 (keysym 0xfe03, ISO_Level3_Shift), same_screen YES,
XLookupString gives 0 bytes:
XmbLookupString gives 0 bytes:
XFilterEvent returns: False
</code></pre>

<p>The third line is the one we&#39;re interested in. You&#39;ll see the word
keycode followed by the number you&#39;re going to need next, in the example
above it&#39;s 63.</p>

<p>Now we&#39;re going to map that key to give us some foreign characters.</p>

<p><code>$ xmodmap -e &#34;keycode 63 = e E eacute Eacute&#34;</code></p>

<p>The &#34;keycode&#34; command maps a KeyCode to a number of KeySyms. The order
of the KeySyms is important as it represents how the KeySyms are
derived.</p>

<ol>
<li>The key pressed alone</li>
<li>With the Shift modifier</li>
<li>The key pressed along with the Mode_switch key</li>
<li>With Mode_switch AND Shift</li>
</ol>

<p>Mode_switch is just another keysym and you can map it to a chosen key on
your keyboard like this:</p>

<p><code>$ xmodmap -e &#34;keycode 64 = Mode_switch&#34;</code></p>

<p>My personal choice is to map Mode_switch to my AltGr key. To do this,
you can use a special version of the keycode command. `xmodmap -e
&#34;keycode Alt_R = Mode_switch&#34;` This asks xmodmap to lookup what
keycode(s) are currently assigned to the KeySym Alt_R (right alt) and
assign them to Mode_switch as well.</p>

<p>So with the above mappings, here&#39;s what happens when I press the keys on
my keyboard:</p>

<ul>
<li>The key on it&#39;s own -&gt; A lowercase &#39;e&#39;</li>
</ul>

<!-- -->

<ul>
<li>With shift -&gt; An uppercase &#39;E&#39;</li>
</ul>

<!-- -->

<ul>
<li>With AltGr -&gt; A lowercase e-acute (as used in French for example)</li>
</ul>

<!-- -->

<ul>
<li>With AltGr and shift -&gt; An uppercase E-acute</li>
</ul>

<h2 id="saving-your-mappings">Saving Your Mappings</h2>

<p>Once you&#39;ve decided how you&#39;d like everything set up, you obviously
don&#39;t want to have to type all those xmodmap lines in every time you
start X. To save you from this, you can just put all your mapping into a
file (I save mine at <code>~/.xmodmap</code>) and then just tell xmodmap to load
from it.</p>

<p><code>$ xmodmap ~/.xmodmap</code></p>

<p>Ideally, you&#39;d add that line to your <code>.xinitrc</code> so it runs automatically
when you start X.</p>

<p>The End</p>

<p>That just about wraps up this howto. I hope somebody finds it useful as
I certainly found xmodmap confusing in my early days. Now I have my
keyboard customised to do just what I want and I couldn&#39;t live without
it.</p>

<h2 id="useful-links">Useful Links</h2>

<p>A few useful links about xmodmap.</p>

<ul>
<li><a href="http://www.xfree86.org/4.2.0/xmodmap.1.html">xmodmap man page</a></li>
<li><a href="http://www.in-ulm.de/~mascheck/X11/xmodmap.html">Some useful hints</a></li>
<li><a href="http://www.in-ulm.de/~mascheck/X11/Xmodmap.mapping">A very extensive xmodmap example
file</a></li>
</ul>


            <footer>&copy; 2025, Steve Engledow - <a href="/feed.xml">RSS</a></footer>
        </main>
    </body>
</html>
