<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>engledow.me: TBC</title>
        <link rel="stylesheet" href="/style.css">
        <link rel="me" href="https://retro.pizza/@stilvoid">
        <meta name="fediverse:creator" content="@stilvoid@retro.pizza">
    </head>

    <body>
        <nav><ul><li><a href="/index.html">About</a></li>

<li><a href="/bookmarks.html">Bookmarks</a></li>

<li><a href="/blog/index.html" class="selected">Blog</a></li>

<li><a href="/projects/index.html">Projects</a></li>
</ul>

<ul><li><a href="/blog/2024-08-28.html" class="selected">TBC</a><br><span class="date">(2024-08-28)</span></li>

<li><a href="/blog/2024-07-23.html">Back to the Primitive</a><br><span class="date">(2024-07-23)</span></li>

<li><a href="/blog/2019-11-13.html">Maur - A minimal AUR helper</a><br><span class="date">(2019-11-13)</span></li>

<li><a href="/blog/2019-02-12.html">Using Git with AWS CodeCommit Across Multiple AWS Accounts</a><br><span class="date">(2019-02-12)</span></li>

<li><a href="/blog/2018-11-08.html">git-get</a><br><span class="date">(2018-11-08)</span></li>

<li><a href="/blog/2018-08-14.html">Heroes: Building some old code</a><br><span class="date">(2018-08-14)</span></li>

<li><a href="/blog/2018-06-03.html">Shue</a><br><span class="date">(2018-06-03)</span></li>

<li><a href="/blog/2017-07-10.html">An evening of linux on the desktop</a><br><span class="date">(2017-07-10)</span></li>

<li><a href="/blog/2017-06-15.html">The day of linux on the desktop</a><br><span class="date">(2017-06-15)</span></li>

<li><a href="/blog/2016-02-25.html">Digital Subscriber</a><br><span class="date">(2016-02-25)</span></li>

<li><a href="/blog/2015-12-14.html">Ford</a><br><span class="date">(2015-12-14)</span></li>

<li><a href="/blog/2015-11-30.html">Sorted</a><br><span class="date">(2015-11-30)</span></li>

<li><a href="/blog/2015-09-17.html">Twofer</a><br><span class="date">(2015-09-17)</span></li>

<li><a href="/blog/2015-06-22.html">Pretty please</a><br><span class="date">(2015-06-22)</span></li>

<li><a href="/blog/2015-05-15.html">Andy and Teddy are waving goodbye</a><br><span class="date">(2015-05-15)</span></li>

<li><a href="/blog/2015-05-14.html">Building a componentised application</a><br><span class="date">(2015-05-14)</span></li>

<li><a href="/blog/2015-04-29.html">Why-fi?</a><br><span class="date">(2015-04-29)</span></li>

<li><a href="/blog/2015-03-12.html">Cleaning out my closet</a><br><span class="date">(2015-03-12)</span></li>

<li><a href="/blog/2015-01-02.html">Keychain and GnuPG >= 2.1</a><br><span class="date">(2015-01-02)</span></li>

<li><a href="/blog/2014-12-09.html">Testing a Django app with Docker</a><br><span class="date">(2014-12-09)</span></li>

<li><a href="/blog/2014-12-01.html">Just call me Anneka</a><br><span class="date">(2014-12-01)</span></li>

<li><a href="/blog/2014-06-17.html">tmux</a><br><span class="date">(2014-06-17)</span></li>

<li><a href="/blog/2014-04-15.html">Netcat</a><br><span class="date">(2014-04-15)</span></li>

<li><a href="/blog/2014-01-31.html">btw</a><br><span class="date">(2014-01-31)</span></li>

<li><a href="/blog/2013-05-10.html">Things we learned at the LUG meet</a><br><span class="date">(2013-05-10)</span></li>

<li><a href="/blog/2013-02-11.html">Git aux</a><br><span class="date">(2013-02-11)</span></li>

<li><a href="/blog/2012-08-30.html">Lost at C</a><br><span class="date">(2012-08-30)</span></li>

<li><a href="/blog/2012-07-07.html">Ire</a><br><span class="date">(2012-07-07)</span></li>

<li><a href="/blog/2011-10-27.html">Break In!</a><br><span class="date">(2011-10-27)</span></li>

<li><a href="/blog/2011-10-22.html">xmodmap Hints and Tips</a><br><span class="date">(2011-10-22)</span></li>
</ul>
</nav>

        <main>
            <h1>TBC</h1>
<p>In tidying up my corner of the interwebs, I put together a list of
projects that I've worked on over the years. One
of those is <a href="../games.md#falsoyd">Falsoyd</a>. I commented "I don't
know if it even compiles on modern systems". Of course, that stuck in my
head and inevitably I had to try...</p>
<p>Hoooo boy.</p>
<p>It has been a <em>long time</em> since I wrote anything in my <a href="2014-01-31.md">once-favourite
language, C</a> (or C++). <a href="https://github.com/search?q=user%3Astilvoid+AND+%28language%3AC+OR+language%3AC%2B%2B%29&amp;type=code">A GitHub
search</a>
suggests it's been around 10 years. Fortunately, I had no intentions of
really fixing any coding problems - just getting Falsoyd to run by brute
force :D</p>
<h2>It starts</h2>
<pre><code>git clone git@github.com:stilvoid/falysoyd
cd falsoyd
make
...
sdl-config: command not found
fatal error: 'SDL_mixer.h' file not found
</code></pre>
<p>Oh yeah, this was all SDL. Oh well, I'm sure that's still around!</p>
<pre><code>brew install sdl
Warning: Formula sdl was renamed to sdl12-compat.
</code></pre>
<p>Ok well, it turns out SDL1.2 is looong deprecated but some kind person
has written a compatibility library for SDL2 so that should all work
quite nicely...</p>
<pre><code>make
fatal error: 'SDL_mixer.h' file not found
brew install sdl_mixer
Error: sdl_mixer has been disabled because it is deprecated upstream! It was disabled on 2024-02-07.
</code></pre>
<p>If only I had tried this 6 months ago ;) After a quick look, SDL2_mixer
seems to have the same API as in SDL1.2 so I'll nab the header file from
there, include it in my CFLAGS, and link to SDL2_mixer in addition to
the SDL1.2 (compat) library. What could possibly go wrong?!</p>
<pre><code>make
...
src/map.h:35:6: error: cast from pointer to smaller type 'int' loses information
        p.x=(int)x;
            ^~~~~~
src/map.h:36:6: error: cast from pointer to smaller type 'int' loses information
        p.y=(int)y;
</code></pre>
<p>Ooh, an actual bug. Forgot to dereference some pointers. I wonder how
that ever worked before. Well, it's an easy fix!</p>
<pre><code>make
...
g++  src/world.o src/audio.o src/score.o src/bonus.o src/shot.o src/sprite.o src/ship.o src/alien.o src/main.o -o src/falsoyd `sdl-config --libs` -lSDL2_mixer
</code></pre>
<p>It compiled! That was unexpectedly easy. I was anticipating some
nastiness with mixing SDL1.2 and SDL2_mixer.</p>
<p>(I glossed over <em>a lot</em> of compiler warnings in that "..." btw. Don't
ignore your compiler warnings, folks!)</p>
<p>My fingers began to tremble (they didn't) as I nervously (I wasn't)
typed <code>./src/falsoyd</code>...</p>
<p><img alt="A screenshot of
Falsoyd" src="https://static.offend.me.uk/media/images/2024-08-28-falsoyd.png" /></p>
<p>It runs! I played it for a little while. Remembered how terrible it was
and committed <a href="https://github.com/stilvoid/falsoyd/tree/2024">a branch</a>
with my changes. That'll do for now. Itch scratched.</p>
<p>Now I'm clearly going to have to make Falsoyd 2 in LÃ¶ve, Pico-8, or
Picotron ;)</p>

            <footer>&copy; 2024, Steve Engledow</footer>
        </main>
    </body>
</html>
